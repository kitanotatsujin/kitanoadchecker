# 02. ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é † - Setup Guide

**æœ€çµ‚æ›´æ–°**: 2025å¹´11æœˆ30æ—¥
**å¯¾è±¡èª­è€…**: é–‹ç™ºè€…ã€DevOpsæ‹…å½“è€…ã€ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€…

---

## ç›®æ¬¡

1. [æ¦‚è¦](#æ¦‚è¦)
2. [å‰ææ¡ä»¶](#å‰ææ¡ä»¶)
3. [ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—](#ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—)
4. [Railwayãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆæ–¹æ³•1: GitHubé€£æºï¼‰](#railwayãƒ‡ãƒ—ãƒ­ã‚¤æ–¹æ³•1-githubé€£æº)
5. [Railwayãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆæ–¹æ³•2: Railway CLIï¼‰](#railwayãƒ‡ãƒ—ãƒ­ã‚¤æ–¹æ³•2-railway-cli)
6. [Vector DatabaseåˆæœŸåŒ–](#vector-databaseåˆæœŸåŒ–)
7. [CI/CDè‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤è¨­å®š](#cicdè‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤è¨­å®š)
8. [ç’°å¢ƒãƒã‚§ãƒƒã‚¯ã¨ãƒ†ã‚¹ãƒˆ](#ç’°å¢ƒãƒã‚§ãƒƒã‚¯ã¨ãƒ†ã‚¹ãƒˆ)
9. [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](#ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°)

---

## æ¦‚è¦

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€**kitanoadchecker**ï¼ˆåºƒå‘Šæ–‡ãƒªãƒ¼ã‚¬ãƒ«ãƒã‚§ãƒƒã‚¯ãƒ„ãƒ¼ãƒ«ï¼‰ã‚’**ã‚¼ãƒ­ã‹ã‚‰ç«‹ã¡ä¸Šã’ã‚‹**ãŸã‚ã®å®Œå…¨ã‚¬ã‚¤ãƒ‰ã§ã™ã€‚

### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã®ã‚´ãƒ¼ãƒ«

- âœ… ãƒ­ãƒ¼ã‚«ãƒ«ã§é–‹ç™ºç’°å¢ƒãŒå‹•ä½œ
- âœ… Railwayã§ChromaDBãŒç¨¼åƒ
- âœ… Webã‚¢ãƒ—ãƒªãŒæœ¬ç•ªç’°å¢ƒã§ç¨¼åƒ
- âœ… Vector DBã«ãƒŠãƒ¬ãƒƒã‚¸ãŒç™»éŒ²æ¸ˆã¿
- âœ… GitHubã¸ã®pushã§è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤

### æ‰€è¦æ™‚é–“

| å·¥ç¨‹ | æ‰€è¦æ™‚é–“ |
|------|---------|
| ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— | 30åˆ† |
| Railwayãƒ‡ãƒ—ãƒ­ã‚¤ | 20åˆ† |
| Vector DBåˆæœŸåŒ– | 10åˆ† |
| **åˆè¨ˆ** | **ç´„60åˆ†** |

---

## å‰ææ¡ä»¶

### å¿…é ˆãƒ„ãƒ¼ãƒ«

| ãƒ„ãƒ¼ãƒ« | æœ€å°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç¢ºèªã‚³ãƒãƒ³ãƒ‰ |
|--------|--------------|-------------|
| **Node.js** | 18.xä»¥ä¸Š | `node -v` |
| **npm** | 9.xä»¥ä¸Š | `npm -v` |
| **Git** | 2.xä»¥ä¸Š | `git --version` |
| **Docker** | 20.10ä»¥ä¸Š | `docker --version` |
| **Docker Compose** | 2.0ä»¥ä¸Š | `docker-compose --version` |

### ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ

| ã‚µãƒ¼ãƒ“ã‚¹ | ç”¨é€” | å–å¾—å…ˆ |
|---------|------|--------|
| **GitHub** | ã‚³ãƒ¼ãƒ‰ç®¡ç† + Railwayé€£æº | https://github.com/ |
| **Railway** | æœ¬ç•ªç’°å¢ƒãƒ‡ãƒ—ãƒ­ã‚¤ | https://railway.app/ |
| **Google AI Studio** | Gemini APIã‚­ãƒ¼å–å¾— | https://aistudio.google.com/app/apikey |

### ç’°å¢ƒç¢ºèªã‚¹ã‚¯ãƒªãƒ—ãƒˆ

```bash
# ã™ã¹ã¦ã®ãƒ„ãƒ¼ãƒ«ã‚’ä¸€æ‹¬ç¢ºèª
node -v && npm -v && git --version && docker --version && docker-compose --version
```

**æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›ä¾‹:**
```
v22.16.0
9.8.1
git version 2.49.0
Docker version 20.10.24
Docker Compose version v2.17.3
```

---

## ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### ã‚¹ãƒ†ãƒƒãƒ—1: ãƒªãƒã‚¸ãƒˆãƒªã‚¯ãƒ­ãƒ¼ãƒ³

```bash
# GitHubã‹ã‚‰ã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/kitanotatsujin/kitanoadchecker.git

# ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç§»å‹•
cd kitanoadchecker

# ãƒ–ãƒ©ãƒ³ãƒç¢ºèª
git branch
# å‡ºåŠ›: * main
```

### ã‚¹ãƒ†ãƒƒãƒ—2: ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# Node.jsãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install

# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å®Œäº†ç¢ºèª
npm list --depth=0
```

**æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›:**
```
ad-legal-checker@0.1.0
â”œâ”€â”€ @google/generative-ai@0.24.1
â”œâ”€â”€ chromadb@3.0.17
â”œâ”€â”€ next@14.2.0
â”œâ”€â”€ react@18.3.0
â””â”€â”€ ...
```

### ã‚¹ãƒ†ãƒƒãƒ—3: ç’°å¢ƒå¤‰æ•°è¨­å®š

```bash
# .env.exampleã‚’ã‚³ãƒ”ãƒ¼
cp .env.example .env

# .envãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†
nano .env
# ã¾ãŸã¯
code .env  # VS Code
```

**`.env` ãƒ•ã‚¡ã‚¤ãƒ«å†…å®¹:**

```bash
# ===========================
# ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒç”¨è¨­å®š
# ===========================

# Gemini API Key (å¿…é ˆ: Vector DBã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ™‚ã®ã¿)
# å–å¾—å…ˆ: https://aistudio.google.com/app/apikey
GEMINI_API_KEY=your_gemini_api_key_here

# ChromaDB URL (ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºæ™‚)
CHROMA_URL=http://localhost:8000

# Nodeç’°å¢ƒ
NODE_ENV=development
```

**âš ï¸ é‡è¦:**
- `GEMINI_API_KEY` ã¯ **Vector DBã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ™‚ã®ã¿** å¿…è¦
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯å„è‡ªã®APIã‚­ãƒ¼ã‚’WebUIçµŒç”±ã§å…¥åŠ›
- æœ¬ç•ªç’°å¢ƒã§ã¯ `GEMINI_API_KEY` ã‚’è¨­å®šã—ãªã„

### ã‚¹ãƒ†ãƒƒãƒ—4: ChromaDBèµ·å‹•ï¼ˆDockerï¼‰

```bash
# Docker Composeã‚’ä½¿ç”¨ã—ã¦ChromaDBèµ·å‹•
docker-compose up -d chroma

# èµ·å‹•ç¢ºèª
docker ps
```

**æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›:**
```
CONTAINER ID   IMAGE                    STATUS         PORTS
abc123def456   chromadb/chroma:latest   Up 10 seconds  0.0.0.0:8000->8000/tcp
```

**ChromaDBæ¥ç¶šç¢ºèª:**

```bash
# ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
curl http://localhost:8000/api/v1/heartbeat

# æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›
{"nanosecond heartbeat":1234567890}
```

### ã‚¹ãƒ†ãƒƒãƒ—5: Vector DatabaseåˆæœŸåŒ–

**åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ™‚ã®ã¿å®Ÿè¡ŒãŒå¿…è¦ã§ã™ã€‚**

```bash
# Vector DBã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œ
npm run setup:vector-db
```

**å®Ÿè¡Œãƒ­ã‚°ä¾‹:**

```
================================================================================
ğŸš€ Vector DB Setup Started
================================================================================

ğŸ“‚ Loading knowledge files...
âœ… Loaded 131 files from knowledge/common/
âœ… Loaded 8 files from knowledge/HA/
âœ… Loaded 3 files from knowledge/SH/
ğŸ“Š Total: 142 knowledge files

ğŸ”ª Chunking knowledge files...
âœ… Generated 1,333 chunks (avg 850 chars/chunk)

ğŸ“Š Priority breakdown:
   - P1 (Company Standards): 125 chunks
   - P2 (Laws): 556 chunks
   - P3 (Guidelines): 652 chunks

ğŸ§  Generating embeddings...
[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 100% | 1333/1333 chunks
â±ï¸  Time: 6m 32s

ğŸ’¾ Storing in ChromaDB...
âœ… Collection created: ad_checker_knowledge
âœ… Batch insert complete: 1,333 vectors

================================================================================
âœ… Vector database setup complete!
================================================================================
```

**æ‰€è¦æ™‚é–“:** ç´„5ã€œ10åˆ†ï¼ˆGemini APIã®é€Ÿåº¦ã«ä¾å­˜ï¼‰

### ã‚¹ãƒ†ãƒƒãƒ—6: é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•

```bash
# Next.jsé–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•
npm run dev
```

**èµ·å‹•ãƒ­ã‚°:**

```
â–² Next.js 14.2.0
- Local:        http://localhost:3000
- ready started server on 0.0.0.0:3000, url: http://localhost:3000
```

### ã‚¹ãƒ†ãƒƒãƒ—7: ãƒ–ãƒ©ã‚¦ã‚¶ã§ç¢ºèª

1. ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://localhost:3000 ã‚’é–‹ã
2. ä»¥ä¸‹ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª:
   - å•†å“é¸æŠãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³
   - ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ã‚¨ãƒªã‚¢
   - Gemini APIã‚­ãƒ¼å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
   - ã€Œãƒã‚§ãƒƒã‚¯é–‹å§‹ã€ãƒœã‚¿ãƒ³

### ã‚¹ãƒ†ãƒƒãƒ—8: å‹•ä½œç¢ºèªãƒ†ã‚¹ãƒˆ

```bash
# ãƒ†ã‚¹ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œ
npm run test

# ç’°å¢ƒãƒã‚§ãƒƒã‚¯
npm run check-env
```

**`npm run check-env` å‡ºåŠ›ä¾‹:**

```
âœ… Node.js version: v22.16.0
âœ… npm version: 9.8.1
âœ… node_modules exists
âœ… knowledge/ directory exists (142 files)
âœ… Docker is running
âœ… ChromaDB is accessible (http://localhost:8000)
âœ… Vector DB has data (1,333 documents)
âœ… .env file exists
âœ… CHROMA_URL is set
âš ï¸  GEMINI_API_KEY not set (optional for runtime)

================================================================================
âœ… Environment check complete!
================================================================================
```

---

## Railwayãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆæ–¹æ³•1: GitHubé€£æºï¼‰

**æ¨å¥¨:** GitHubã¸ã®pushã§è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸã„å ´åˆ

### å‰ææ¡ä»¶

- GitHubã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
- Railwayã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆç„¡æ–™ã§ä½œæˆå¯èƒ½ï¼‰
- ãƒªãƒã‚¸ãƒˆãƒªãŒGitHubã«pushæ¸ˆã¿

### ã‚¹ãƒ†ãƒƒãƒ—1: Railwayã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ

1. https://railway.app/ ã«ã‚¢ã‚¯ã‚»ã‚¹
2. **ã€ŒLogin with GitHubã€** ã‚’ã‚¯ãƒªãƒƒã‚¯
3. GitHubã§èªè¨¼
4. Railwayåˆ©ç”¨è¦ç´„ã«åŒæ„

### ã‚¹ãƒ†ãƒƒãƒ—2: æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ

1. Railwayãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ **ã€ŒNew Projectã€** ã‚’ã‚¯ãƒªãƒƒã‚¯
2. **ã€ŒDeploy from GitHub repoã€** ã‚’é¸æŠ
3. ãƒªãƒã‚¸ãƒˆãƒªä¸€è¦§ã‹ã‚‰ **`kitanotatsujin/kitanoadchecker`** ã‚’é¸æŠ

**æ³¨:** ãƒªãƒã‚¸ãƒˆãƒªãŒè¡¨ç¤ºã•ã‚Œãªã„å ´åˆ:
1. **ã€ŒConfigure GitHub Appã€** ã‚’ã‚¯ãƒªãƒƒã‚¯
2. Railwayã« `kitanoadchecker` ãƒªãƒã‚¸ãƒˆãƒªã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©ã‚’ä»˜ä¸

### ã‚¹ãƒ†ãƒƒãƒ—3: ChromaDBã‚µãƒ¼ãƒ“ã‚¹è¿½åŠ 

1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç”»é¢ã§ **ã€Œ+ New Serviceã€** ã‚’ã‚¯ãƒªãƒƒã‚¯
2. **ã€ŒEmpty Serviceã€** ã‚’é¸æŠ
3. ã‚µãƒ¼ãƒ“ã‚¹åã‚’ **`chroma`** ã«è¨­å®š

#### 3-1. Dockerã‚¤ãƒ¡ãƒ¼ã‚¸è¨­å®š

1. `chroma` ã‚µãƒ¼ãƒ“ã‚¹ã® **ã€ŒSettingsã€** ã‚¿ãƒ–ã‚’é–‹ã
2. **ã€ŒSourceã€** ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ä»¥ä¸‹ã‚’è¨­å®š:
   - **Source Type:** `Docker Image`
   - **Image:** `chromadb/chroma:latest`
3. **ã€ŒDeployã€** ã‚’ã‚¯ãƒªãƒƒã‚¯

#### 3-2. Volumeï¼ˆæ°¸ç¶šã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼‰è¨­å®š

**é‡è¦:** ChromaDBã®ãƒ‡ãƒ¼ã‚¿ã‚’æ°¸ç¶šåŒ–ã™ã‚‹ãŸã‚å¿…é ˆ

1. `chroma` ã‚µãƒ¼ãƒ“ã‚¹ã® **ã€ŒSettingsã€** â†’ **ã€ŒVolumesã€**
2. **ã€Œ+ Add Volumeã€** ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ä»¥ä¸‹ã‚’å…¥åŠ›:
   - **Mount Path:** `/chroma/chroma`
   - **Size:** `10 GB`ï¼ˆæ¨å¥¨ï¼‰
4. **ã€ŒAddã€** ã‚’ã‚¯ãƒªãƒƒã‚¯

#### 3-3. ç’°å¢ƒå¤‰æ•°è¨­å®šï¼ˆChromaDBï¼‰

**ã€ŒVariablesã€** ã‚¿ãƒ–ã§ä»¥ä¸‹ã‚’è¿½åŠ :

| å¤‰æ•°å | å€¤ |
|--------|-----|
| `CHROMA_SERVER_CORS_ALLOW_ORIGINS` | `*` |
| `ALLOW_RESET` | `true` |

#### 3-4. ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è¨­å®š

1. **ã€ŒSettingsã€** â†’ **ã€ŒNetworkingã€**
2. **ã€ŒGenerate Domainã€** ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ç”Ÿæˆã•ã‚ŒãŸURLã‚’ãƒ¡ãƒ¢ï¼ˆä¾‹: `chroma-production-abc123.up.railway.app`ï¼‰

**æ³¨:** ã“ã®URLã¯å¾Œã§Webã‚¢ãƒ—ãƒªã®ç’°å¢ƒå¤‰æ•°ã«è¨­å®šã—ã¾ã™ã€‚

### ã‚¹ãƒ†ãƒƒãƒ—4: Webã‚¢ãƒ—ãƒªã‚µãƒ¼ãƒ“ã‚¹è¨­å®š

Railwayã¯è‡ªå‹•çš„ã«GitHubãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰Webã‚¢ãƒ—ãƒªã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½œæˆã—ã¦ã„ã¾ã™ã€‚

#### 4-1. ãƒ“ãƒ«ãƒ‰è¨­å®šç¢ºèª

1. Webã‚¢ãƒ—ãƒªã‚µãƒ¼ãƒ“ã‚¹ã‚’é¸æŠ
2. **ã€ŒSettingsã€** â†’ **ã€ŒBuildã€** ã‚¿ãƒ–
3. ä»¥ä¸‹ãŒè‡ªå‹•æ¤œå‡ºã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª:
   - **Builder:** `Dockerfile`
   - **Build Command:** è‡ªå‹•ï¼ˆ`npm run build`ï¼‰
   - **Start Command:** `sh scripts/startup.sh`

#### 4-2. ç’°å¢ƒå¤‰æ•°è¨­å®šï¼ˆWebã‚¢ãƒ—ãƒªï¼‰

**ã€ŒVariablesã€** ã‚¿ãƒ–ã§ä»¥ä¸‹ã‚’è¿½åŠ :

| å¤‰æ•°å | å€¤ | èª¬æ˜ |
|--------|-----|------|
| `NODE_ENV` | `production` | æœ¬ç•ªç’°å¢ƒãƒ¢ãƒ¼ãƒ‰ |
| `CHROMA_URL` | `http://chroma.railway.internal:8000` | ChromaDBã®å†…éƒ¨URL |

**âš ï¸ é‡è¦:**
- **`GEMINI_API_KEY`ã¯è¨­å®šã—ãªã„**ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒUIçµŒç”±ã§æä¾›ï¼‰
- `CHROMA_URL` ã¯ **internal URL** ã‚’ä½¿ç”¨ï¼ˆ`http://chroma.railway.internal:8000`ï¼‰

#### 4-3. ãƒãƒ¼ãƒˆè¨­å®š

1. **ã€ŒSettingsã€** â†’ **ã€ŒNetworkingã€**
2. **ã€ŒGenerate Domainã€** ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ç”Ÿæˆã•ã‚ŒãŸå…¬é–‹URLï¼ˆä¾‹: `kitanoadchecker-production.up.railway.app`ï¼‰

### ã‚¹ãƒ†ãƒƒãƒ—5: Vector DatabaseåˆæœŸåŒ–ï¼ˆæœ¬ç•ªç’°å¢ƒï¼‰

**åˆå›ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œã€1å›ã ã‘å®Ÿè¡Œ**

#### 5-1. ç’°å¢ƒå¤‰æ•°ã§åˆæœŸåŒ–ã‚’æœ‰åŠ¹åŒ–

Webã‚¢ãƒ—ãƒªã‚µãƒ¼ãƒ“ã‚¹ã® **ã€ŒVariablesã€** ã‚¿ãƒ–ã§ä»¥ä¸‹ã‚’ **ä¸€æ™‚çš„ã«** è¿½åŠ :

| å¤‰æ•°å | å€¤ | èª¬æ˜ |
|--------|-----|------|
| `SETUP_VECTOR_DB` | `true` | èµ·å‹•æ™‚ã«Vector DBã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚’å®Ÿè¡Œ |
| `CLEAR_EXISTING` | `true` | æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¯ãƒªã‚¢ï¼ˆä»»æ„ï¼‰ |
| `GEMINI_API_KEY` | `your_api_key` | ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ç”¨ï¼ˆä¸€æ™‚çš„ï¼‰|

#### 5-2. ãƒ‡ãƒ—ãƒ­ã‚¤å®Ÿè¡Œ

ç’°å¢ƒå¤‰æ•°ã‚’ä¿å­˜ã™ã‚‹ã¨ã€è‡ªå‹•çš„ã«å†ãƒ‡ãƒ—ãƒ­ã‚¤ãŒé–‹å§‹ã•ã‚Œã¾ã™ã€‚

#### 5-3. ãƒ­ã‚°ã§é€²æ—ç¢ºèª

1. Webã‚¢ãƒ—ãƒªã‚µãƒ¼ãƒ“ã‚¹ã® **ã€ŒDeploymentsã€** ã‚¿ãƒ–
2. æœ€æ–°ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ãƒ­ã‚°ã‚’ç¢ºèª:

```
ğŸš€ Starting up application...
ğŸ“¦ Setting up vector database...

> ad-legal-checker@0.1.0 setup:vector-db
> tsx scripts/setup-vector-db.ts

================================================================================
ğŸš€ Vector DB Setup Started
================================================================================

âœ… Successfully loaded 142 knowledge files
âœ… Generated 1,333 chunks with embeddings
âœ… Vector database setup complete!

ğŸŒ Starting Next.js server...
â–² Next.js 14.2.0
- ready started server on [::]:3000
```

**å®Ÿè¡Œæ™‚é–“:** ç´„5ã€œ10åˆ†

#### 5-4. ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å¾Œã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

**Vector DBã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãŒå®Œäº†ã—ãŸã‚‰ã€ä»¥ä¸‹ã®ç’°å¢ƒå¤‰æ•°ã‚’å‰Šé™¤:**

1. `SETUP_VECTOR_DB` - å‰Šé™¤
2. `CLEAR_EXISTING` - å‰Šé™¤
3. `GEMINI_API_KEY` - **å‰Šé™¤ï¼ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸Šé‡è¦ï¼‰**

å‰Šé™¤å¾Œã€è‡ªå‹•çš„ã«å†ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã€é€šå¸¸ãƒ¢ãƒ¼ãƒ‰ã§èµ·å‹•ã—ã¾ã™ã€‚

### ã‚¹ãƒ†ãƒƒãƒ—6: å‹•ä½œç¢ºèª

#### 6-1. ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯

```bash
curl https://your-app.up.railway.app/api/health
```

**æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›:**
```json
{
  "status": "ok",
  "timestamp": "2025-11-30T12:34:56.789Z",
  "services": {
    "chromadb": "connected"
  }
}
```

#### 6-2. Webã‚¢ãƒ—ãƒªç¢ºèª

1. ãƒ–ãƒ©ã‚¦ã‚¶ã§ `https://your-app.up.railway.app` ã‚’é–‹ã
2. Gemini APIã‚­ãƒ¼ã‚’å…¥åŠ›
3. åºƒå‘Šæ–‡ã‚’ãƒ†ã‚¹ãƒˆ:
   ```
   åˆºã™ãƒ’ã‚¢ãƒ«ãƒ­ãƒ³é…¸ã§ã‚¯ãƒâ€»1å¯¾ç­–
   â€»1å¹´é½¢ã«ã‚ˆã‚‹ä¹¾ç‡¥
   ```
4. å•†å“ã‚’é¸æŠ: **HA**
5. **ã€Œãƒã‚§ãƒƒã‚¯é–‹å§‹ã€** ã‚’ã‚¯ãƒªãƒƒã‚¯
6. çµæœãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª

---

## Railwayãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆæ–¹æ³•2: Railway CLIï¼‰

**æ¨å¥¨:** GitHubé€£æºãŒé›£ã—ã„å ´åˆã€ã¾ãŸã¯ãƒ­ãƒ¼ã‚«ãƒ«ã‹ã‚‰ç›´æ¥ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸã„å ´åˆ

### ã‚¹ãƒ†ãƒƒãƒ—1: Railway CLI ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# npmçµŒç”±ã§ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install -g @railway/cli

# ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª
railway --version
```

**æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›:**
```
railway 4.11.1
```

### ã‚¹ãƒ†ãƒƒãƒ—2: Railwayã«ãƒ­ã‚°ã‚¤ãƒ³

```bash
# ãƒ­ã‚°ã‚¤ãƒ³ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œ
railway login
```

**å‹•ä½œ:**
1. ãƒ–ãƒ©ã‚¦ã‚¶ãŒè‡ªå‹•çš„ã«é–‹ã
2. Railwayã®ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã‚‹
3. GitHubã¾ãŸã¯ãƒ¡ãƒ¼ãƒ«ã§ãƒ­ã‚°ã‚¤ãƒ³
4. **ã€ŒAuthorize Railway CLIã€** ã‚’ã‚¯ãƒªãƒƒã‚¯
5. ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«æˆ»ã‚Šã€ãƒ­ã‚°ã‚¤ãƒ³å®Œäº†

**ãƒ­ã‚°ã‚¤ãƒ³ç¢ºèª:**

```bash
railway whoami
```

**å‡ºåŠ›ä¾‹:**
```
Logged in as: your-email@example.com
```

### ã‚¹ãƒ†ãƒƒãƒ—3: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•
cd kitanoadchecker

# Railwayãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸåŒ–
railway init
```

**ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ:**
```
? Project name: kitanoadchecker
? Environment: production
```

### ã‚¹ãƒ†ãƒƒãƒ—4: ChromaDBã‚µãƒ¼ãƒ“ã‚¹è¿½åŠ 

Railwayãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§æ‰‹å‹•ä½œæˆï¼ˆæ–¹æ³•1ã®ã‚¹ãƒ†ãƒƒãƒ—3ã¨åŒã˜ï¼‰

### ã‚¹ãƒ†ãƒƒãƒ—5: ç’°å¢ƒå¤‰æ•°è¨­å®š

```bash
# ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š
railway variables set NODE_ENV=production
railway variables set CHROMA_URL=http://chroma.railway.internal:8000

# ç¢ºèª
railway variables
```

### ã‚¹ãƒ†ãƒƒãƒ—6: ãƒ‡ãƒ—ãƒ­ã‚¤å®Ÿè¡Œ

```bash
# ãƒ­ãƒ¼ã‚«ãƒ«ã®ã‚³ãƒ¼ãƒ‰ã‚’Railwayã«ãƒ‡ãƒ—ãƒ­ã‚¤
railway up
```

**å®Ÿè¡Œãƒ­ã‚°:**
```
ğŸš€ Uploading project...
ğŸ“¦ Building...
ğŸ—ï¸  Running: npm install
ğŸ—ï¸  Running: npm run build
âœ… Build complete
ğŸš€ Deploying...
âœ… Deployment complete

ğŸŒ Live at: https://kitanoadchecker-production-xyz.up.railway.app
```

### ã‚¹ãƒ†ãƒƒãƒ—7: Vector DBåˆæœŸåŒ–

```bash
# ç’°å¢ƒå¤‰æ•°ã‚’ä¸€æ™‚çš„ã«è¨­å®š
railway variables set SETUP_VECTOR_DB=true
railway variables set GEMINI_API_KEY=your_api_key

# å†ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆè‡ªå‹•å®Ÿè¡Œï¼‰
# ãƒ­ã‚°ã§ç¢ºèª
railway logs

# å®Œäº†å¾Œã€ç’°å¢ƒå¤‰æ•°å‰Šé™¤
railway variables delete SETUP_VECTOR_DB
railway variables delete GEMINI_API_KEY
```

---

## Vector DatabaseåˆæœŸåŒ–

### æ¦‚è¦

Vector Databaseï¼ˆChromaDBï¼‰ã«ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹ã‚’ç™»éŒ²ã™ã‚‹å‡¦ç†ã§ã™ã€‚

### åˆæœŸåŒ–ãŒå¿…è¦ãªã‚¿ã‚¤ãƒŸãƒ³ã‚°

- âœ… åˆå›ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ï¼ˆå¿…é ˆï¼‰
- âœ… ãƒŠãƒ¬ãƒƒã‚¸ãƒ•ã‚¡ã‚¤ãƒ«è¿½åŠ /æ›´æ–°æ™‚
- âœ… Vector DBã‚’ã‚¯ãƒªã‚¢ã—ãŸã„æ™‚

### ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®åˆæœŸåŒ–

```bash
# æ–°è¦ä½œæˆ
npm run setup:vector-db

# æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¯ãƒªã‚¢ã—ã¦å†ä½œæˆ
npm run setup:vector-db:clear
```

### Railwayã§ã®åˆæœŸåŒ–

**æ–¹æ³•1: ç’°å¢ƒå¤‰æ•°ãƒˆãƒªã‚¬ãƒ¼**

1. Webã‚¢ãƒ—ãƒªã‚µãƒ¼ãƒ“ã‚¹ã® **ã€ŒVariablesã€** ã‚¿ãƒ–
2. ä»¥ä¸‹ã‚’è¿½åŠ :
   - `SETUP_VECTOR_DB=true`
   - `GEMINI_API_KEY=your_api_key`
3. ä¿å­˜ï¼ˆè‡ªå‹•å†ãƒ‡ãƒ—ãƒ­ã‚¤ï¼‰
4. ãƒ­ã‚°ã§é€²æ—ç¢ºèª
5. å®Œäº†å¾Œã€ç’°å¢ƒå¤‰æ•°å‰Šé™¤

**æ–¹æ³•2: Railway CLI**

```bash
# Railway CLIã§ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œ
railway run npm run setup:vector-db:clear
```

**æ–¹æ³•3: ãƒ­ãƒ¼ã‚«ãƒ«ã‹ã‚‰æœ¬ç•ªDBã«æ¥ç¶š**

```bash
# .envãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†
CHROMA_URL=https://chroma-production-abc123.up.railway.app
GEMINI_API_KEY=your_api_key

# ãƒ­ãƒ¼ã‚«ãƒ«ã‹ã‚‰å®Ÿè¡Œ
npm run setup:vector-db:clear
```

### åˆæœŸåŒ–ãƒ—ãƒ­ã‚»ã‚¹ã®è©³ç´°

```
[1] ãƒŠãƒ¬ãƒƒã‚¸ãƒ•ã‚¡ã‚¤ãƒ«èª­è¾¼
    â”œâ”€â”€ knowledge/common/ (131ãƒ•ã‚¡ã‚¤ãƒ«)
    â”œâ”€â”€ knowledge/HA/ (8ãƒ•ã‚¡ã‚¤ãƒ«)
    â””â”€â”€ knowledge/SH/ (3ãƒ•ã‚¡ã‚¤ãƒ«)
    åˆè¨ˆ: 142ãƒ•ã‚¡ã‚¤ãƒ«
         â†“
[2] ãƒãƒ£ãƒ³ã‚¯åˆ†å‰²
    â”œâ”€â”€ 1,000æ–‡å­—å˜ä½ã§åˆ†å‰²
    â”œâ”€â”€ é‡è¤‡200æ–‡å­—ï¼ˆã‚ªãƒ¼ãƒãƒ¼ãƒ©ãƒƒãƒ—ï¼‰
    â””â”€â”€ åˆè¨ˆ: 1,333 chunksç”Ÿæˆ
         â†“
[3] ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ä»˜ä¸
    å„ãƒãƒ£ãƒ³ã‚¯ã«ä»¥ä¸‹ã‚’ä»˜ä¸:
    â”œâ”€â”€ priority (P1/P2/P3)
    â”œâ”€â”€ productId (HA/SH/å…¨å•†å“)
    â”œâ”€â”€ filename
    â””â”€â”€ keywords (è‡ªå‹•æŠ½å‡º)
         â†“
[4] Embeddingç”Ÿæˆ (Gemini API)
    â”œâ”€â”€ Model: text-embedding-004
    â”œâ”€â”€ Batchå‡¦ç†: 100ä»¶ãšã¤
    â”œâ”€â”€ 768æ¬¡å…ƒãƒ™ã‚¯ãƒˆãƒ«ç”Ÿæˆ
    â””â”€â”€ æ‰€è¦æ™‚é–“: 5ã€œ10åˆ†
         â†“
[5] ChromaDBã«ä¿å­˜
    â”œâ”€â”€ Collectionä½œæˆ/ã‚¯ãƒªã‚¢
    â”œâ”€â”€ Batch Insertå®Ÿè¡Œ
    â””â”€â”€ Persistent Volumeã«ä¿å­˜
         â†“
    âœ… å®Œäº†
```

---

## CI/CDè‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤è¨­å®š

### GitHubé€£æºã§ã®è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤

**Railwayã¯è‡ªå‹•çš„ã«GitHub Webhookã‚’è¨­å®šã—ã¾ã™ã€‚**

#### å‹•ä½œãƒ•ãƒ­ãƒ¼

```
[é–‹ç™ºè€…] ã‚³ãƒ¼ãƒ‰ç·¨é›†
    â†“ git add/commit/push
[GitHub] mainãƒ–ãƒ©ãƒ³ãƒæ›´æ–°
    â†“ Webhook
[Railway] è‡ªå‹•æ¤œå‡º
    â†“
[Railway] ãƒ“ãƒ«ãƒ‰é–‹å§‹
    â”œâ”€â”€ Dockerfileæ¤œå‡º
    â”œâ”€â”€ npm installå®Ÿè¡Œ
    â”œâ”€â”€ npm run buildå®Ÿè¡Œ
    â””â”€â”€ Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ä½œæˆ
    â†“
[Railway] ãƒ‡ãƒ—ãƒ­ã‚¤å®Ÿè¡Œ
    â”œâ”€â”€ æ–°ã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•
    â”œâ”€â”€ ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
    â””â”€â”€ ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯åˆ‡æ›¿
    â†“
[Railway] æ—§ã‚³ãƒ³ãƒ†ãƒŠåœæ­¢
    â†“
âœ… ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†ï¼ˆæ‰€è¦æ™‚é–“: 2ã€œ5åˆ†ï¼‰
```

#### ãƒ‡ãƒ—ãƒ­ã‚¤ãƒˆãƒªã‚¬ãƒ¼

| ã‚¤ãƒ™ãƒ³ãƒˆ | è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ |
|---------|------------|
| `main` ãƒ–ãƒ©ãƒ³ãƒã¸push | âœ… Yes |
| `develop` ãƒ–ãƒ©ãƒ³ãƒã¸push | âŒ Noï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ |
| Pull Requestä½œæˆ | âŒ No |
| ã‚¿ã‚°push | âŒ No |

**ãƒ–ãƒ©ãƒ³ãƒè¨­å®šå¤‰æ›´:**

1. Railwayãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ã‚µãƒ¼ãƒ“ã‚¹ã‚’é¸æŠ
2. **ã€ŒSettingsã€** â†’ **ã€ŒSourceã€**
3. **ã€ŒBranchã€** ã‚’å¤‰æ›´ï¼ˆä¾‹: `develop`ï¼‰

#### ãƒ‡ãƒ—ãƒ­ã‚¤é€šçŸ¥è¨­å®š

**Slacké€šçŸ¥:**

1. Railway **ã€ŒSettingsã€** â†’ **ã€ŒIntegrationsã€**
2. **ã€ŒAdd Integrationã€** â†’ **ã€ŒSlackã€**
3. Webhook URLã‚’è¨­å®š

**Discordé€šçŸ¥:**

1. Discord Webhookã‚’ä½œæˆ
2. Railway **ã€ŒSettingsã€** â†’ **ã€ŒWebhooksã€**
3. Webhook URLã‚’è¿½åŠ 

---

## ç’°å¢ƒãƒã‚§ãƒƒã‚¯ã¨ãƒ†ã‚¹ãƒˆ

### ç’°å¢ƒãƒã‚§ãƒƒã‚¯ã‚³ãƒãƒ³ãƒ‰

```bash
# ç·åˆãƒã‚§ãƒƒã‚¯
npm run check-env
```

**ãƒã‚§ãƒƒã‚¯é …ç›®:**
- âœ… Node.js/npm version
- âœ… node_moduleså­˜åœ¨
- âœ… knowledge/ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå­˜åœ¨
- âœ… Dockerå‹•ä½œç¢ºèª
- âœ… ChromaDBæ¥ç¶šç¢ºèª
- âœ… Vector DBãƒ‡ãƒ¼ã‚¿ç¢ºèª
- âœ… .envãƒ•ã‚¡ã‚¤ãƒ«å­˜åœ¨
- âœ… ç’°å¢ƒå¤‰æ•°è¨­å®šç¢ºèª

### æ‰‹å‹•ãƒ†ã‚¹ãƒˆ

#### 1. ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯API

```bash
# ãƒ­ãƒ¼ã‚«ãƒ«
curl http://localhost:3000/api/health

# æœ¬ç•ª
curl https://your-app.up.railway.app/api/health
```

**æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›:**
```json
{
  "status": "ok",
  "timestamp": "2025-11-30T12:34:56.789Z",
  "services": {
    "chromadb": "connected"
  }
}
```

#### 2. ã‚»ã‚°ãƒ¡ãƒ³ãƒˆåˆ†å‰²API

```bash
curl -X POST http://localhost:3000/api/v2/segment \
  -H "Content-Type: application/json" \
  -d '{
    "text": "åˆºã™ãƒ’ã‚¢ãƒ«ãƒ­ãƒ³é…¸ã§ã‚¯ãƒâ€»1å¯¾ç­–",
    "productId": "HA"
  }'
```

**æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›:**
```json
{
  "segments": [
    {
      "id": "seg_1",
      "text": "åˆºã™ãƒ’ã‚¢ãƒ«ãƒ­ãƒ³é…¸",
      "type": "claim"
    },
    {
      "id": "seg_2",
      "text": "ã‚¯ãƒâ€»1å¯¾ç­–",
      "type": "claim"
    }
  ]
}
```

#### 3. RAGæ¤œç´¢ãƒ†ã‚¹ãƒˆ

```bash
# Vector DBã«æ­£ã—ããƒ‡ãƒ¼ã‚¿ãŒç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
curl http://localhost:8000/api/v1/collections/ad_checker_knowledge
```

**æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›:**
```json
{
  "name": "ad_checker_knowledge",
  "metadata": {},
  "tenant": "default_tenant",
  "database": "default_database"
}
```

### è‡ªå‹•ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

```bash
# Vitestå®Ÿè¡Œ
npm run test

# ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆ
npm run test:coverage
```

---

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ–¹æ³•

#### å•é¡Œ1: `Cannot connect to ChromaDB`

**ç—‡çŠ¶:**
```
Error: Failed to connect to ChromaDB at http://localhost:8000
```

**è§£æ±ºç­–:**

1. ChromaDBãŒèµ·å‹•ã—ã¦ã„ã‚‹ã‹ç¢ºèª:
   ```bash
   docker ps | grep chroma
   ```

2. èµ·å‹•ã—ã¦ã„ãªã„å ´åˆ:
   ```bash
   docker-compose up -d chroma
   ```

3. ãƒãƒ¼ãƒˆç¢ºèª:
   ```bash
   curl http://localhost:8000/api/v1/heartbeat
   ```

#### å•é¡Œ2: `GEMINI_API_KEY environment variable is required`

**ç—‡çŠ¶:**
```
Error: GEMINI_API_KEY environment variable is required
```

**åŸå› :** Vector DBã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ™‚ã«ç’°å¢ƒå¤‰æ•°ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„

**è§£æ±ºç­–:**

```bash
# .envãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèª
cat .env | grep GEMINI_API_KEY

# è¨­å®šã•ã‚Œã¦ã„ãªã„å ´åˆ
echo "GEMINI_API_KEY=your_api_key" >> .env
```

#### å•é¡Œ3: Railway ãƒ‡ãƒ—ãƒ­ã‚¤ãŒå¤±æ•—ã™ã‚‹

**ç—‡çŠ¶:**
```
Build failed: Error response from daemon
```

**è§£æ±ºç­–:**

1. Dockerfileã®æ§‹æ–‡ã‚’ç¢ºèª:
   ```bash
   # ãƒ­ãƒ¼ã‚«ãƒ«ã§ãƒ“ãƒ«ãƒ‰ãƒ†ã‚¹ãƒˆ
   docker build -t test .
   ```

2. `package.json` ã® `start` ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ç¢ºèª:
   ```json
   {
     "scripts": {
       "start": "sh scripts/startup.sh"
     }
   }
   ```

3. `scripts/startup.sh` ãŒå®Ÿè¡Œå¯èƒ½ã‹ç¢ºèª:
   ```bash
   chmod +x scripts/startup.sh
   git add scripts/startup.sh
   git commit -m "Make startup.sh executable"
   git push origin main
   ```

#### å•é¡Œ4: Vector DBã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãŒé€”ä¸­ã§å¤±æ•—

**ç—‡çŠ¶:**
```
Error: Failed to generate embeddings: 429 Too Many Requests
```

**åŸå› :** Gemini APIã®ãƒ¬ãƒ¼ãƒˆåˆ¶é™

**è§£æ±ºç­–:**

1. æ•°åˆ†å¾…ã£ã¦ã‹ã‚‰å†è©¦è¡Œ:
   ```bash
   npm run setup:vector-db
   ```

2. Google AI Studioã§ã‚¯ã‚©ãƒ¼ã‚¿ã‚’ç¢ºèª:
   https://aistudio.google.com/app/apikey

3. æœ‰æ–™ãƒ—ãƒ©ãƒ³ã¸ã®ç§»è¡Œã‚’æ¤œè¨

#### å•é¡Œ5: Railway Volume ãŒæº€æ¯

**ç—‡çŠ¶:**
```
Error: No space left on device
```

**è§£æ±ºç­–:**

1. Railwayãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ Volume ã‚µã‚¤ã‚ºã‚’ç¢ºèª
2. **ã€ŒSettingsã€** â†’ **ã€ŒVolumesã€** â†’ ã‚µã‚¤ã‚ºã‚’å¢—ã‚„ã™ï¼ˆä¾‹: 20GBï¼‰
3. ä¸è¦ãªãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤:
   ```bash
   # Railway CLIçµŒç”±ã§ã‚·ã‚§ãƒ«ã‚¢ã‚¯ã‚»ã‚¹
   railway shell

   # ChromaDBãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚µã‚¤ã‚ºç¢ºèª
   du -sh /chroma/chroma

   # å¤ã„ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å‰Šé™¤ï¼ˆè©²å½“ã™ã‚‹å ´åˆï¼‰
   rm -rf /chroma/chroma/backups/*
   ```

#### å•é¡Œ6: æœ¬ç•ªç’°å¢ƒã§Gemini APIã‚­ãƒ¼ãŒä½¿ãˆãªã„

**ç—‡çŠ¶:**
```
Error: Invalid API key
```

**åŸå› :** ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå…¥åŠ›ã—ãŸAPIã‚­ãƒ¼ãŒç„¡åŠ¹

**è§£æ±ºç­–:**

1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æ­£ã—ã„APIã‚­ãƒ¼ã‚’ç¢ºèªã—ã¦ã‚‚ã‚‰ã†
2. Google AI Studioã§æ–°ã—ã„ã‚­ãƒ¼ã‚’ç™ºè¡Œ:
   https://aistudio.google.com/app/apikey
3. ãƒ–ãƒ©ã‚¦ã‚¶ã®localStorageã‚’ã‚¯ãƒªã‚¢ï¼ˆå¤ã„ã‚­ãƒ¼ãŒæ®‹ã£ã¦ã„ã‚‹å ´åˆï¼‰

---

## ã¾ã¨ã‚

### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å®Œäº†ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

**ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒ:**
- [ ] ãƒªãƒã‚¸ãƒˆãƒªã‚¯ãƒ­ãƒ¼ãƒ³å®Œäº†
- [ ] ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å®Œäº†
- [ ] `.env` ãƒ•ã‚¡ã‚¤ãƒ«è¨­å®šå®Œäº†
- [ ] ChromaDBèµ·å‹•ç¢ºèª
- [ ] Vector DBã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å®Œäº†
- [ ] é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•ç¢ºèª
- [ ] ãƒ–ãƒ©ã‚¦ã‚¶ã§å‹•ä½œç¢ºèª

**Railwayæœ¬ç•ªç’°å¢ƒ:**
- [ ] Railwayã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ
- [ ] ChromaDBã‚µãƒ¼ãƒ“ã‚¹ä½œæˆï¼ˆVolumeè¨­å®šæ¸ˆã¿ï¼‰
- [ ] Webã‚¢ãƒ—ãƒªã‚µãƒ¼ãƒ“ã‚¹ä½œæˆ
- [ ] ç’°å¢ƒå¤‰æ•°è¨­å®šå®Œäº†
- [ ] Vector DBã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å®Œäº†
- [ ] å…¬é–‹URLã§å‹•ä½œç¢ºèª
- [ ] è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ç¢ºèª

### æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

- **[03_å•†å“è¿½åŠ ãƒ»åŸºæº–æ›´æ–°æ‰‹é †.md](./03_å•†å“è¿½åŠ ãƒ»åŸºæº–æ›´æ–°æ‰‹é †.md)** - ãƒŠãƒ¬ãƒƒã‚¸ç®¡ç†
- **[04_å…¥å‡ºåŠ›ã‚µãƒ³ãƒ—ãƒ«ã¨æœŸå¾…çµæœ.md](./04_å…¥å‡ºåŠ›ã‚µãƒ³ãƒ—ãƒ«ã¨æœŸå¾…çµæœ.md)** - APIä»•æ§˜
- **[05_æ¨©é™ãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£.md](./05_æ¨©é™ãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£.md)** - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š

---

**Document Version**: 1.0
**Last Updated**: 2025-11-30
**Author**: kitanoadchecker Development Team
